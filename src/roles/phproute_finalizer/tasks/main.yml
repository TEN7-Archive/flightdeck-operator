---
- name: Generate the route name
  set_fact:
    _phproute_full_name: "{{ fullname_override | default(ansible_operator_meta.name + '-phproute') }}"

- name: Delete cert certificate if autogenerated
  k8s:
    api_version: "v1"
    kind: "Secret"
    name: "{{ 'cert-' + _phproute_full_name }}"
    namespace: "{{ ansible_operator_meta.namespace }}"
    state: absent

- name: Delete ingress
  k8s:
    api_version: "networking.k8s.io/v1"
    kind: "Ingress"
    name: "{{ _phproute_full_name }}"
    namespace: "{{ ansible_operator_meta.namespace }}"
    state: absent
